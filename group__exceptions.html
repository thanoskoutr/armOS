<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>armOS: exceptions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_200x200.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">armOS
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">Minimal ARM Operating System for the Raspberry Pi 					- Documentation generated for Pi 4.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__exceptions.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">exceptions</div>  </div>
</div><!--header-->
<div class="contents">

<p>Code for handling exceptions/interupts.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:irq_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="irq_8c.html">irq.c</a></td></tr>
<tr class="memdesc:irq_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of interrupt handling functions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:armv6_2irq_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="armv6_2irq_8h.html">irq.h</a></td></tr>
<tr class="memdesc:armv6_2irq_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of armv6 interrupt initialization functions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:armv8-a_2irq_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="armv8-a_2irq_8h.html">irq.h</a></td></tr>
<tr class="memdesc:armv8-a_2irq_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of armv8-a interrupt initialization functions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:kernel_2irq_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kernel_2irq_8h.html">irq.h</a></td></tr>
<tr class="memdesc:kernel_2irq_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of interrupt handling functions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gacb903c598b93612e00f362771bf9a9e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__exceptions.html#gacb903c598b93612e00f362771bf9a9e3">irq_vector_init</a> ()</td></tr>
<tr class="separator:gacb903c598b93612e00f362771bf9a9e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f683ecd9ce97f150af200d971b14e79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__exceptions.html#ga0f683ecd9ce97f150af200d971b14e79">irq_enable</a> ()</td></tr>
<tr class="separator:ga0f683ecd9ce97f150af200d971b14e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab925df19b13ecfb0441d5ea0b4adaf5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__exceptions.html#gab925df19b13ecfb0441d5ea0b4adaf5c">irq_disable</a> ()</td></tr>
<tr class="separator:gab925df19b13ecfb0441d5ea0b4adaf5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga653bbaae58f45143a395e9c66b8fb078"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__exceptions.html#ga653bbaae58f45143a395e9c66b8fb078">enable_interrupt_controller</a> ()</td></tr>
<tr class="separator:ga653bbaae58f45143a395e9c66b8fb078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1c51431d3e9c1428373e8e37923bfb5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__exceptions.html#gad1c51431d3e9c1428373e8e37923bfb5">show_invalid_entry_message</a> (int type, unsigned long esr, unsigned long address)</td></tr>
<tr class="separator:gad1c51431d3e9c1428373e8e37923bfb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7d6887152583e2f53fab07e339fbc7b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__exceptions.html#ga7d6887152583e2f53fab07e339fbc7b5">handle_irq</a> ()</td></tr>
<tr class="separator:ga7d6887152583e2f53fab07e339fbc7b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94e1af654620af88ffb7db3948a6c3fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__exceptions.html#ga94e1af654620af88ffb7db3948a6c3fc">handle_timer_1_irq</a> ()</td></tr>
<tr class="separator:ga94e1af654620af88ffb7db3948a6c3fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga613e37fdbbce7a1430e79e9271c333e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__exceptions.html#ga613e37fdbbce7a1430e79e9271c333e9">handle_timer_3_irq</a> ()</td></tr>
<tr class="separator:ga613e37fdbbce7a1430e79e9271c333e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga445a9b186fb7ecdc84d987a5f8b187ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__exceptions.html#ga445a9b186fb7ecdc84d987a5f8b187ee">handle_uart_irq</a> ()</td></tr>
<tr class="separator:ga445a9b186fb7ecdc84d987a5f8b187ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Code for handling exceptions/interupts. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga653bbaae58f45143a395e9c66b8fb078"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga653bbaae58f45143a395e9c66b8fb078">&#9670;&nbsp;</a></span>enable_interrupt_controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enable_interrupt_controller </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enables System Timer and UART interrupts. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="peripherals_2irq_8h.html" title="Definition of IRQ registers addresses.">peripherals/irq.h</a> </dd></dl>

</div>
</div>
<a id="ga7d6887152583e2f53fab07e339fbc7b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7d6887152583e2f53fab07e339fbc7b5">&#9670;&nbsp;</a></span>handle_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handle_irq </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Exception handler for all IRQs.</p>
<p>Reads from the interrupt pending registers ( <a class="el" href="group__peripherals.html#ggabc6126af1d45847bc59afa0aa3216b04a2753750ce2611779cb0997f890acbd8b">IRQ0_PENDING_0</a> or <a class="el" href="group__peripherals.html#ggabc6126af1d45847bc59afa0aa3216b04abe0ddba285ed373dbb791543102b228d">IRQ0_PENDING_1</a>), and if a valid value is found we have an interrupt. Checks each bit for the interrupts we have enabled, and if it is set, it removes the bit we handled and calls the corresponding handler. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__exceptions.html#ga94e1af654620af88ffb7db3948a6c3fc">handle_timer_1_irq()</a>, <a class="el" href="group__exceptions.html#ga613e37fdbbce7a1430e79e9271c333e9">handle_timer_3_irq()</a>, <a class="el" href="group__exceptions.html#ga445a9b186fb7ecdc84d987a5f8b187ee">handle_uart_irq()</a> </dd></dl>

</div>
</div>
<a id="ga94e1af654620af88ffb7db3948a6c3fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga94e1af654620af88ffb7db3948a6c3fc">&#9670;&nbsp;</a></span>handle_timer_1_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handle_timer_1_irq </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Exception handler for System Timer 1.</p>
<p>Gets called when an interrupt is triggered from the System Timer 1.</p><ul>
<li>Updates current counter value, for next interrupt with the same interval ( <a class="el" href="timer_8c.html#acbb07890b65fb304f633943ccd3c430c">interval_1</a>).</li>
<li>Set this value to be compared for System Timer 1 Interrupt.</li>
<li>Acknowledges the interrupt by writing 1 to the <a class="el" href="group__peripherals.html#gga61dadd085c1777f559549e05962b2c9ea6489f1da437aa26c7e063cf0e050bc77">TIMER_CS</a> register</li>
<li>Calls <a class="el" href="group__drivers.html#gab8d2bf004d7c5d00e1937eb0ebe6fafb">led_on_ms()</a>, to pulse the LED for a small interval.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="peripherals_2timer_8h.html" title="Definition of System Timer registers addresses.">peripherals/timer.h</a>, <a class="el" href="group__exceptions.html#ga7d6887152583e2f53fab07e339fbc7b5">handle_irq()</a>, <a class="el" href="group__drivers.html#gab8d2bf004d7c5d00e1937eb0ebe6fafb">led_on_ms()</a> </dd></dl>

</div>
</div>
<a id="ga613e37fdbbce7a1430e79e9271c333e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga613e37fdbbce7a1430e79e9271c333e9">&#9670;&nbsp;</a></span>handle_timer_3_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handle_timer_3_irq </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Exception handler for System Timer 3.</p>
<p>Gets called when an interrupt is triggered from the System Timer 3.</p><ul>
<li>Updates current counter value, for next interrupt with the same interval ( <a class="el" href="timer_8c.html#ab7553f2f2b871b86c2f9e1447bf18599">interval_3</a>).</li>
<li>Set this value to be compared for System Timer 3 Interrupt.</li>
<li>Acknowledges the interrupt by writing 1 to the <a class="el" href="group__peripherals.html#gga61dadd085c1777f559549e05962b2c9ea6489f1da437aa26c7e063cf0e050bc77">TIMER_CS</a> register</li>
<li>Calls <a class="el" href="group__processes.html#ga1d20445f4dfe5c6183e929ef7221d4d4">timer_tick()</a> for the scheduler.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="peripherals_2timer_8h.html" title="Definition of System Timer registers addresses.">peripherals/timer.h</a>, <a class="el" href="group__exceptions.html#ga7d6887152583e2f53fab07e339fbc7b5">handle_irq()</a>, <a class="el" href="group__processes.html#ga1d20445f4dfe5c6183e929ef7221d4d4">timer_tick()</a> </dd></dl>

</div>
</div>
<a id="ga445a9b186fb7ecdc84d987a5f8b187ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga445a9b186fb7ecdc84d987a5f8b187ee">&#9670;&nbsp;</a></span>handle_uart_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handle_uart_irq </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Exception handler for the UART (Asynchronous read from the serial input).</p>
<p>Gets called when an interrupt is triggered from the UART. While the receiver holds a valid bit, reads the byte and echoes back. </p><dl class="section note"><dt>Note</dt><dd>If a Carriage Return (<code>\r</code>) char is found, it appends a New Line (<code>\n</code>) char. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__exceptions.html#ga7d6887152583e2f53fab07e339fbc7b5">handle_irq()</a>, <a class="el" href="group__drivers.html#ga305693d1fe48929393be1fe4683b96cd">uart_getc()</a>, <a class="el" href="group__drivers.html#ga8eaa1ed3292777a3ed02045bd4b612c3">uart_putc()</a> </dd></dl>

</div>
</div>
<a id="gab925df19b13ecfb0441d5ea0b4adaf5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab925df19b13ecfb0441d5ea0b4adaf5c">&#9670;&nbsp;</a></span>irq_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irq_disable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Disables (Masks) interrupts. </p>

</div>
</div>
<a id="ga0f683ecd9ce97f150af200d971b14e79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0f683ecd9ce97f150af200d971b14e79">&#9670;&nbsp;</a></span>irq_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irq_enable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enables (Unmasks) interrupts. </p>

</div>
</div>
<a id="gacb903c598b93612e00f362771bf9a9e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacb903c598b93612e00f362771bf9a9e3">&#9670;&nbsp;</a></span>irq_vector_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irq_vector_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes interrupts, by moving the exception vector at address 0x0. </p>

</div>
</div>
<a id="gad1c51431d3e9c1428373e8e37923bfb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad1c51431d3e9c1428373e8e37923bfb5">&#9670;&nbsp;</a></span>show_invalid_entry_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void show_invalid_entry_message </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>esr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prints information about the error, on an invalid exception. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of exception, defined in <a class="el" href="armv8-a_2entry_8h.html" title="Definition of armv8-a Invalid exception type values.">include/armv8-a/entry.h</a> </td></tr>
    <tr><td class="paramname">esr</td><td>Exception Syndrome Register (ESR), contains detailed information about what causes an exception. </td></tr>
    <tr><td class="paramname">address</td><td>The address of the instruction that had been executed when the exception was generated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="armv8-a_2entry_8h.html" title="Definition of armv8-a Invalid exception type values.">include/armv8-a/entry.h</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
